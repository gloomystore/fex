<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fex.js í…ŒìŠ¤íŠ¸</title>
  <script type="module">
    import fex, { FexCancelToken } from '../dist/fex.js';

    async function testTimeout() {
      console.log("ğŸ•’ íƒ€ì„ì•„ì›ƒ í…ŒìŠ¤íŠ¸ ì‹œì‘...");

      try {
        const response = await fex.get("https://httpbin.org/delay/5", {
          timeout: 3000, // 3ì´ˆ í›„ íƒ€ì„ì•„ì›ƒ ë°œìƒ (httpbinì€ 5ì´ˆ ë’¤ ì‘ë‹µ)
        });
        console.log("âœ… ì„±ê³µ ì‘ë‹µ:", response.data);
      } catch (error) {
        console.error("âŒ íƒ€ì„ì•„ì›ƒ ë°œìƒ:", error.message);
      }
    }

    async function testNormalRequest() {
      console.log("ğŸ“¡ ì •ìƒ ìš”ì²­ í…ŒìŠ¤íŠ¸ ì‹œì‘...");

      try {
        const response = await fex.get("https://httpbin.org/get", {
          timeout: 5000, // ì¶©ë¶„í•œ ì‹œê°„ (5ì´ˆ) ì¤Œ
        });
        console.log("âœ… ì •ìƒ ì‘ë‹µ:", response.data);
      } catch (error) {
        console.error("âŒ ìš”ì²­ ì‹¤íŒ¨:", error.message);
      }
    }

    async function testCancelToken() {
      console.log("ğŸš¨ ìš”ì²­ ì·¨ì†Œ í…ŒìŠ¤íŠ¸ ì‹œì‘...");
      const cancelToken = new FexCancelToken();

      setTimeout(() => {
        console.log("ğŸ›‘ ìš”ì²­ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.");
        cancelToken.cancel("í…ŒìŠ¤íŠ¸ì—ì„œ ìš”ì²­ì„ ì·¨ì†Œí•¨");
      }, 2000); // 2ì´ˆ í›„ ìš”ì²­ ì·¨ì†Œ

      try {
        const response = await fex.get("https://httpbin.org/delay/5", {
          cancelToken,
        });
        console.log("âœ… ì„±ê³µ ì‘ë‹µ:", response.data);
      } catch (error) {
        console.error("âŒ ìš”ì²­ ì·¨ì†Œë¨:", error.message);
      }
    }

    // âœ… í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    testTimeout();
    setTimeout(() => testNormalRequest(), 5000); // 5ì´ˆ í›„ ì‹¤í–‰
    setTimeout(() => testCancelToken(), 10000); // 10ì´ˆ í›„ ì‹¤í–‰

  </script>
</head>
<body>
  <h1>fex.js í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>
</body>
</html>
